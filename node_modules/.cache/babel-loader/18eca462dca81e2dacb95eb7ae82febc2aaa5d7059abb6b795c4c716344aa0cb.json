{"ast":null,"code":"var _jsxFileName = \"/Users/tsheltrimpemo/Desktop/YourBhutan/src/pages/host/HostDashboard.jsx\",\n  _s = $RefreshSig$();\nimport { useEffect, useState } from \"react\";\nimport { useNavigate, Link } from \"react-router-dom\";\nimport { supabase } from \"../../utils/supabaseClient\";\nimport Sidebar from \"../../components/Sidebar\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction HostDashboard() {\n  _s();\n  const navigate = useNavigate();\n  const [user, setUser] = useState(null);\n  const [bookings, setBookings] = useState([]);\n  const [loading, setLoading] = useState(true);\n  useEffect(() => {\n    async function fetchUser() {\n      const {\n        data,\n        error\n      } = await supabase.auth.getUser();\n      if (error || !data.user) {\n        console.error(\"Error fetching user:\", error);\n        navigate(\"/host/login\");\n        return;\n      }\n      setUser(data.user);\n      await fetchBookings(data.user.id); // Ensure this completes before setting loading false\n    }\n\n    fetchUser();\n  }, []);\n\n  /** Fetch bookings for homestays owned by the logged-in host */\n  async function fetchBookings(userId) {\n    if (!userId) {\n      setLoading(false); // Prevent infinite loading if userId is missing\n      return;\n    }\n    try {\n      console.log(\"Fetching host details for user:\", userId);\n\n      // Step 1: Get HostId from the `host` table using Supabase user ID\n      const {\n        data: hostData,\n        error: hostError\n      } = await supabase.from(\"host\").select(\"hostid\").eq(\"hostid\", userId) // Ensure `userid` in `host` table matches Supabase `auth.users.id`\n      .single();\n      if (hostError || !hostData) {\n        console.error(\"Error fetching host details:\", hostError);\n        setLoading(false);\n        return;\n      }\n      const hostId = hostData.hostid;\n      console.log(\"Found host ID:\", hostId);\n\n      // Step 2: Get all homestay IDs for this host\n      const {\n        data: homestays,\n        error: homestayError\n      } = await supabase.from(\"homestay\").select(\"homestayid\").eq(\"hostid\", hostId);\n      if (homestayError || !homestays || homestays.length === 0) {\n        console.error(\"No homestays found for this host:\", homestayError);\n        setLoading(false);\n        return;\n      }\n      const homeStayIds = homestays.map(home => home.homestayid);\n      console.log(\"Homestay IDs found:\", homeStayIds);\n\n      // Step 3: Get all bookings for these homestays\n      const {\n        data: bookingsData,\n        error: bookingsError\n      } = await supabase.from(\"booking\").select(\"bookingid, checkin, checkout, adult, children, guestname, guestemail, homestayid, status\").in(\"homestayid\", homeStayIds);\n      if (bookingsError) {\n        console.error(\"Error fetching bookings:\", bookingsError);\n        setLoading(false);\n        return;\n      }\n      setBookings(bookingsData);\n      setLoading(false); // ‚úÖ Ensure loading is turned off after fetching\n    } catch (error) {\n      console.error(\"Unexpected error fetching bookings:\", error);\n      setLoading(false);\n    }\n  }\n\n  /** Handle Accepting or Declining a booking */\n  async function handleBookingAction(bookingid, action) {\n    const booking = bookings.find(b => b.bookingid === bookingid);\n    if (!booking) return;\n    const emailBody = action === \"Accepted\" ? `Dear ${booking.guestname},\\n\\nYour booking request has been ACCEPTED! üéâ\\nCheck-in: ${booking.checkin}\\nCheck-out: ${booking.checkout}\\n\\nWe look forward to hosting you!\\n\\nBest,\\nYourBhutan Team` : `Dear ${booking.guestname},\\n\\nUnfortunately, your booking request has been DECLINED. üòû\\nIf you have any questions, please contact us.\\n\\nBest,\\nYourBhutan Team`;\n    const emailSubject = action === \"Accepted\" ? \"üéâ Booking Confirmed - YourBhutan\" : \"üòû Booking Declined - YourBhutan\";\n\n    // ‚úÖ 1. Send Email via API (Replace with your actual API key and sender email)\n    const response = await fetch(\"https://api.resend.com/emails\", {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: `Bearer YOUR_RESEND_API_KEY` // Replace with actual API key\n      },\n\n      body: JSON.stringify({\n        from: \"YourBhutan <noreply@yourbhutan.com>\",\n        // Replace with your domain\n        to: booking.guestemail,\n        subject: emailSubject,\n        text: emailBody\n      })\n    });\n    const emailResult = await response.json();\n    if (!response.ok) {\n      console.error(\"‚ùå Failed to send email:\", emailResult);\n      alert(\"Error sending email to guest.\");\n      return;\n    }\n    console.log(\"‚úÖ Email sent successfully:\", emailResult);\n\n    // ‚úÖ 2. Update Booking Status in Supabase\n    if (action === \"Accepted\") {\n      const {\n        error\n      } = await supabase.from(\"booking\").update({\n        status: \"Accepted\"\n      }).eq(\"bookingid\", bookingid);\n      if (error) {\n        console.error(`Error updating booking status: ${error.message}`);\n      } else {\n        fetchBookings(user.id);\n      }\n    } else if (action === \"Declined\") {\n      const {\n        error\n      } = await supabase.from(\"booking\").delete().eq(\"bookingid\", bookingid);\n      if (error) {\n        console.error(`Error deleting booking: ${error.message}`);\n      } else {\n        fetchBookings(user.id);\n      }\n    }\n  }\n  if (loading) return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"flex justify-center items-center h-screen\",\n    children: \"Loading...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 153,\n    columnNumber: 23\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"flex h-screen\",\n    children: [/*#__PURE__*/_jsxDEV(Sidebar, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"main\", {\n      className: \"flex-1 p-8\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex justify-between items-center\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"text-2xl font-semibold\",\n          children: \"Booking Management\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 163,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center space-x-2\",\n          children: /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"font-semibold\",\n            children: user === null || user === void 0 ? void 0 : user.email\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 165,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 164,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"table\", {\n        className: \"w-full bg-white mt-6 overflow-hidden\",\n        children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n          children: /*#__PURE__*/_jsxDEV(\"tr\", {\n            className: \"text-gray-500 text-left border-b\",\n            children: [/*#__PURE__*/_jsxDEV(\"th\", {\n              className: \"py-3 px-4\",\n              children: \"Name\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 173,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              className: \"py-3 px-4\",\n              children: \"Check-in\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 174,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              className: \"py-3 px-4\",\n              children: \"Check-out\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 175,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              className: \"py-3 px-4\",\n              children: \"Adults\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 176,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              className: \"py-3 px-4\",\n              children: \"Children\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 177,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              className: \"py-3 px-4\",\n              children: \"Action\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 178,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              className: \"py-3 px-4\",\n              children: \"More Details\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 179,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 172,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 171,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n          children: bookings.map(booking => /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"td\", {\n              className: \"py-3 px-4\",\n              children: booking.guestname\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 185,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              className: \"py-3 px-4\",\n              children: booking.checkin\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 186,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              className: \"py-3 px-4\",\n              children: booking.checkout\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 187,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              className: \"py-3 px-4\",\n              children: booking.adult\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 188,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              className: \"py-3 px-4\",\n              children: booking.children\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 189,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              className: \"py-3 px-4\",\n              children: booking.status === \"Accepted\" ? /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-green-600 font-semibold\",\n                children: \"Accepted\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 192,\n                columnNumber: 21\n              }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"bg-[#51CF03] text-white px-3 py-1 rounded-full hover:bg-green-600 mr-2\",\n                  onClick: () => handleBookingAction(booking.bookingid, \"Accepted\"),\n                  children: \"Accept\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 195,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"bg-[#FF6600] text-white px-3 py-1 rounded-full hover:bg-red-600\",\n                  onClick: () => handleBookingAction(booking.bookingid, \"Declined\"),\n                  children: \"Decline\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 201,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 190,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              className: \"px-4 py-3 underline text-[#6E6E6E]\",\n              children: /*#__PURE__*/_jsxDEV(Link, {\n                to: `/host/guestdetails/${booking.bookingid}`,\n                children: \"More Details\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 211,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 210,\n              columnNumber: 17\n            }, this)]\n          }, booking.bookingid, true, {\n            fileName: _jsxFileName,\n            lineNumber: 184,\n            columnNumber: 15\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 182,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 156,\n    columnNumber: 5\n  }, this);\n}\n_s(HostDashboard, \"tIxVZh8dmsknNHlrZpCFQwKaXow=\", false, function () {\n  return [useNavigate];\n});\n_c = HostDashboard;\nexport default HostDashboard;\nvar _c;\n$RefreshReg$(_c, \"HostDashboard\");","map":{"version":3,"names":["useEffect","useState","useNavigate","Link","supabase","Sidebar","jsxDEV","_jsxDEV","Fragment","_Fragment","HostDashboard","_s","navigate","user","setUser","bookings","setBookings","loading","setLoading","fetchUser","data","error","auth","getUser","console","fetchBookings","id","userId","log","hostData","hostError","from","select","eq","single","hostId","hostid","homestays","homestayError","length","homeStayIds","map","home","homestayid","bookingsData","bookingsError","in","handleBookingAction","bookingid","action","booking","find","b","emailBody","guestname","checkin","checkout","emailSubject","response","fetch","method","headers","Authorization","body","JSON","stringify","to","guestemail","subject","text","emailResult","json","ok","alert","update","status","message","delete","className","children","fileName","_jsxFileName","lineNumber","columnNumber","email","adult","onClick","_c","$RefreshReg$"],"sources":["/Users/tsheltrimpemo/Desktop/YourBhutan/src/pages/host/HostDashboard.jsx"],"sourcesContent":["import { useEffect, useState } from \"react\";\nimport { useNavigate, Link } from \"react-router-dom\";\nimport { supabase } from \"../../utils/supabaseClient\";\nimport Sidebar from \"../../components/Sidebar\";\n\nfunction HostDashboard() {\n  const navigate = useNavigate();\n  const [user, setUser] = useState(null);\n  const [bookings, setBookings] = useState([]);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    async function fetchUser() {\n      const { data, error } = await supabase.auth.getUser();\n      if (error || !data.user) {\n        console.error(\"Error fetching user:\", error);\n        navigate(\"/host/login\");\n        return;\n      }\n\n      setUser(data.user);\n      await fetchBookings(data.user.id); // Ensure this completes before setting loading false\n    }\n\n    fetchUser();\n  }, []);\n\n  /** Fetch bookings for homestays owned by the logged-in host */\n  async function fetchBookings(userId) {\n    if (!userId) {\n      setLoading(false); // Prevent infinite loading if userId is missing\n      return;\n    }\n\n    try {\n      console.log(\"Fetching host details for user:\", userId);\n\n      // Step 1: Get HostId from the `host` table using Supabase user ID\n      const { data: hostData, error: hostError } = await supabase\n        .from(\"host\")\n        .select(\"hostid\")\n        .eq(\"hostid\", userId) // Ensure `userid` in `host` table matches Supabase `auth.users.id`\n        .single();\n\n      if (hostError || !hostData) {\n        console.error(\"Error fetching host details:\", hostError);\n        setLoading(false);\n        return;\n      }\n\n      const hostId = hostData.hostid;\n      console.log(\"Found host ID:\", hostId);\n\n      // Step 2: Get all homestay IDs for this host\n      const { data: homestays, error: homestayError } = await supabase\n        .from(\"homestay\")\n        .select(\"homestayid\")\n        .eq(\"hostid\", hostId);\n\n      if (homestayError || !homestays || homestays.length === 0) {\n        console.error(\"No homestays found for this host:\", homestayError);\n        setLoading(false);\n        return;\n      }\n\n      const homeStayIds = homestays.map((home) => home.homestayid);\n      console.log(\"Homestay IDs found:\", homeStayIds);\n\n      // Step 3: Get all bookings for these homestays\n      const { data: bookingsData, error: bookingsError } = await supabase\n        .from(\"booking\")\n        .select(\"bookingid, checkin, checkout, adult, children, guestname, guestemail, homestayid, status\")\n        .in(\"homestayid\", homeStayIds);\n\n      if (bookingsError) {\n        console.error(\"Error fetching bookings:\", bookingsError);\n        setLoading(false);\n        return;\n      }\n\n      setBookings(bookingsData);\n      setLoading(false); // ‚úÖ Ensure loading is turned off after fetching\n    } catch (error) {\n      console.error(\"Unexpected error fetching bookings:\", error);\n      setLoading(false);\n    }\n  }\n\n  /** Handle Accepting or Declining a booking */\n  async function handleBookingAction(bookingid, action) {\n    const booking = bookings.find((b) => b.bookingid === bookingid);\n    if (!booking) return;\n  \n    const emailBody =\n      action === \"Accepted\"\n        ? `Dear ${booking.guestname},\\n\\nYour booking request has been ACCEPTED! üéâ\\nCheck-in: ${booking.checkin}\\nCheck-out: ${booking.checkout}\\n\\nWe look forward to hosting you!\\n\\nBest,\\nYourBhutan Team`\n        : `Dear ${booking.guestname},\\n\\nUnfortunately, your booking request has been DECLINED. üòû\\nIf you have any questions, please contact us.\\n\\nBest,\\nYourBhutan Team`;\n  \n    const emailSubject =\n      action === \"Accepted\" ? \"üéâ Booking Confirmed - YourBhutan\" : \"üòû Booking Declined - YourBhutan\";\n  \n    // ‚úÖ 1. Send Email via API (Replace with your actual API key and sender email)\n    const response = await fetch(\"https://api.resend.com/emails\", {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: `Bearer YOUR_RESEND_API_KEY`, // Replace with actual API key\n      },\n      body: JSON.stringify({\n        from: \"YourBhutan <noreply@yourbhutan.com>\", // Replace with your domain\n        to: booking.guestemail,\n        subject: emailSubject,\n        text: emailBody,\n      }),\n    });\n  \n    const emailResult = await response.json();\n    if (!response.ok) {\n      console.error(\"‚ùå Failed to send email:\", emailResult);\n      alert(\"Error sending email to guest.\");\n      return;\n    }\n  \n    console.log(\"‚úÖ Email sent successfully:\", emailResult);\n  \n    // ‚úÖ 2. Update Booking Status in Supabase\n    if (action === \"Accepted\") {\n      const { error } = await supabase\n        .from(\"booking\")\n        .update({ status: \"Accepted\" })\n        .eq(\"bookingid\", bookingid);\n  \n      if (error) {\n        console.error(`Error updating booking status: ${error.message}`);\n      } else {\n        fetchBookings(user.id);\n      }\n    } else if (action === \"Declined\") {\n      const { error } = await supabase\n        .from(\"booking\")\n        .delete()\n        .eq(\"bookingid\", bookingid);\n  \n      if (error) {\n        console.error(`Error deleting booking: ${error.message}`);\n      } else {\n        fetchBookings(user.id);\n      }\n    }\n  }\n  \n\n  if (loading) return <div className=\"flex justify-center items-center h-screen\">Loading...</div>;\n\n  return (\n    <div className=\"flex h-screen\">\n      {/* Sidebar */}\n      <Sidebar />\n\n      {/* Main Content */}\n      <main className=\"flex-1 p-8\">\n        <div className=\"flex justify-between items-center\">\n          <h2 className=\"text-2xl font-semibold\">Booking Management</h2>\n          <div className=\"flex items-center space-x-2\">\n            <span className=\"font-semibold\">{user?.email}</span>\n          </div>\n        </div>\n\n        {/* Booking Table */}\n        <table className=\"w-full bg-white mt-6 overflow-hidden\">\n          <thead>\n            <tr className=\"text-gray-500 text-left border-b\">\n              <th className=\"py-3 px-4\">Name</th>\n              <th className=\"py-3 px-4\">Check-in</th>\n              <th className=\"py-3 px-4\">Check-out</th>\n              <th className=\"py-3 px-4\">Adults</th>\n              <th className=\"py-3 px-4\">Children</th>\n              <th className=\"py-3 px-4\">Action</th>\n              <th className=\"py-3 px-4\">More Details</th>\n            </tr>\n          </thead>\n          <tbody>\n            {bookings.map((booking) => (\n              <tr key={booking.bookingid}>\n                <td className=\"py-3 px-4\">{booking.guestname}</td>\n                <td className=\"py-3 px-4\">{booking.checkin}</td>\n                <td className=\"py-3 px-4\">{booking.checkout}</td>\n                <td className=\"py-3 px-4\">{booking.adult}</td>\n                <td className=\"py-3 px-4\">{booking.children}</td>\n                <td className=\"py-3 px-4\">\n                  {booking.status === \"Accepted\" ? (\n                    <span className=\"text-green-600 font-semibold\">Accepted</span>\n                  ) : (\n                    <>\n                      <button \n                        className=\"bg-[#51CF03] text-white px-3 py-1 rounded-full hover:bg-green-600 mr-2\"\n                        onClick={() => handleBookingAction(booking.bookingid, \"Accepted\")}\n                      >\n                        Accept\n                      </button>\n                      <button \n                        className=\"bg-[#FF6600] text-white px-3 py-1 rounded-full hover:bg-red-600\"\n                        onClick={() => handleBookingAction(booking.bookingid, \"Declined\")}\n                      >\n                        Decline\n                      </button>\n                    </>\n                  )}\n                </td>\n                <td className=\"px-4 py-3 underline text-[#6E6E6E]\">\n                  <Link to={`/host/guestdetails/${booking.bookingid}`}>More Details</Link>\n                </td>\n              </tr>\n            ))}\n          </tbody>\n        </table>\n      </main>\n    </div>\n  );\n}\n\nexport default HostDashboard;\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}